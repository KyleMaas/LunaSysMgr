<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LunaSysMgr: reorderableiconlayout.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">LunaSysMgr
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.htm"><span>Namespaces</span></a></li>
      <li><a href="annotated.htm"><span>Classes</span></a></li>
      <li class="current"><a href="files.htm"><span>Files</span></a></li>
      <li><a href="dirs.htm"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.htm"><span>File&#160;List</span></a></li>
      <li><a href="globals.htm"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('reorderableiconlayout_8h.htm','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">reorderableiconlayout.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="reorderableiconlayout_8h.htm">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* @@@LICENSE</span>
<a name="l00002"></a>00002 <span class="comment">*</span>
<a name="l00003"></a>00003 <span class="comment">*      Copyright (c) 2010-2012 Hewlett-Packard Development Company, L.P.</span>
<a name="l00004"></a>00004 <span class="comment">*</span>
<a name="l00005"></a>00005 <span class="comment">* Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<a name="l00006"></a>00006 <span class="comment">* you may not use this file except in compliance with the License.</span>
<a name="l00007"></a>00007 <span class="comment">* You may obtain a copy of the License at</span>
<a name="l00008"></a>00008 <span class="comment">*</span>
<a name="l00009"></a>00009 <span class="comment">* http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00010"></a>00010 <span class="comment">*</span>
<a name="l00011"></a>00011 <span class="comment">* Unless required by applicable law or agreed to in writing, software</span>
<a name="l00012"></a>00012 <span class="comment">* distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00013"></a>00013 <span class="comment">* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<a name="l00014"></a>00014 <span class="comment">* See the License for the specific language governing permissions and</span>
<a name="l00015"></a>00015 <span class="comment">* limitations under the License.</span>
<a name="l00016"></a>00016 <span class="comment">*</span>
<a name="l00017"></a>00017 <span class="comment">* LICENSE@@@ */</span>
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="iconlayout_8h.htm">iconlayout.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="icon_8h.htm">icon.h</a>&quot;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;QList&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;QString&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;QDebug&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QMap&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QPointer&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;QUuid&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef REORDERABLEICONLAYOUT_H_</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define REORDERABLEICONLAYOUT_H_</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="keyword">class </span><a class="code" href="classReorderablePage.htm">ReorderablePage</a>;
<a name="l00036"></a>00036 <span class="keyword">class </span><a class="code" href="classPixmapObject.htm">PixmapObject</a>;
<a name="l00037"></a>00037 <span class="keyword">class </span>QAnimationGroup;
<a name="l00038"></a>00038 <span class="keyword">class </span>IconLayoutAnimationControl;
<a name="l00039"></a>00039 <span class="keyword">class </span><a class="code" href="classIconReorderAnimation.htm">IconReorderAnimation</a>;
<a name="l00040"></a>00040 <span class="keyword">class </span><a class="code" href="classQStateMachine.htm">QStateMachine</a>;
<a name="l00041"></a>00041 <span class="keyword">class </span><a class="code" href="classQState.htm">QState</a>;
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="classReorderableIconLayout.htm">00043</a> <span class="keyword">class </span><a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a> : <span class="keyword">public</span> <a class="code" href="classIconLayout.htm">IconLayout</a>
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045         Q_OBJECT
<a name="l00046"></a>00046 <span class="keyword">public</span>:
<a name="l00047"></a>00047 
<a name="l00048"></a><a class="code" href="classReorderableIconLayout.htm#adb10811a53555457c1db18c9fff889a7">00048</a>         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classReorderablePage.htm">ReorderablePage</a>;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050         <a class="code" href="classReorderableIconLayout.htm#a15e4595cf157a7c3a6c1e9e5af20aa25">ReorderableIconLayout</a>(<a class="code" href="classReorderablePage.htm">ReorderablePage</a> * p_owner);
<a name="l00051"></a>00051         <span class="keyword">virtual</span> <a class="code" href="classReorderableIconLayout.htm#a422721ed99fdc46d6375e58ef20c8036">~ReorderableIconLayout</a>();
<a name="l00052"></a>00052 
<a name="l00053"></a>00053         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ad472caa4dabe477ab6dd52836bff4dad">setLayoutRowSpacing</a>(<span class="keyword">const</span> qreal interRowSpace,
<a name="l00054"></a>00054                                                                         <span class="keyword">const</span> quint32 anchorRowNum=0);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a197975215c47c0a57ddbe6908a420a06">resetLayoutRowSpacingToDefaultSettings</a>();
<a name="l00057"></a>00057 
<a name="l00058"></a>00058         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab977b38102e3a7982b0d18da296015b9">paint</a>(QPainter * painter);
<a name="l00059"></a>00059         <span class="comment">//      (ScrollableObject--&gt;ScrollingLayoutRenderer--&gt;here)</span>
<a name="l00060"></a>00060                 <span class="comment">//      &quot;clipping&quot;, but by only drawing from the source area specified. sourceRect guaranteed to be within</span>
<a name="l00061"></a>00061                 <span class="comment">//              m_geom space</span>
<a name="l00062"></a>00062         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab977b38102e3a7982b0d18da296015b9">paint</a>(QPainter * painter, <span class="keyword">const</span> QRectF&amp; sourceRect);
<a name="l00063"></a>00063         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab977b38102e3a7982b0d18da296015b9">paint</a>(QPainter * painter, <span class="keyword">const</span> QRectF&amp; sourceRect,qint32 renderOpt);
<a name="l00064"></a>00064         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab977b38102e3a7982b0d18da296015b9">paint</a>(<span class="keyword">const</span> QPointF&amp; translate,QPainter * painter);
<a name="l00065"></a>00065 
<a name="l00066"></a>00066         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a0438006c4f24b5425568ca00ed6f339b">paintOffscreen</a>(QPainter * painter);
<a name="l00067"></a>00067         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a0438006c4f24b5425568ca00ed6f339b">paintOffscreen</a>(<a class="code" href="classPixmapObject.htm">PixmapObject</a> * p_pmo);
<a name="l00068"></a>00068         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a0438006c4f24b5425568ca00ed6f339b">paintOffscreen</a>(<a class="code" href="classPixmapHugeObject.htm">PixmapHugeObject</a> * p_hugePmo);
<a name="l00069"></a>00069 
<a name="l00070"></a>00070         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a6e3e75906ab6da657cf27f7abf246bd4">enableAutoPaint</a>();
<a name="l00071"></a>00071         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#aed0c93bf23e71dd8795ae0bf812ff9bb">disableAutoPaint</a>();
<a name="l00072"></a>00072 
<a name="l00073"></a>00073         <span class="comment">//relayout() sets absolute positioning within the item (Page or a Page-subclass) of layout, rows, and cells</span>
<a name="l00074"></a>00074         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a156fb69310f3513443b0e8241ebe1462">relayout</a>(<span class="keywordtype">bool</span> force=<span class="keyword">false</span>);
<a name="l00075"></a>00075         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab01d32c2c176e7660477838148e4a727">resizeWidth</a>(<span class="keyword">const</span> quint32 w);
<a name="l00076"></a>00076         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#aff72e747059516f49830cf0993e303ba">setPosition</a>(<span class="keyword">const</span> QPointF&amp; pos);
<a name="l00077"></a>00077         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a23645b9f87f1ad34dfd06a4522dcd61b">setUniformCellSize</a>(<span class="keyword">const</span> QSize&amp; size);
<a name="l00078"></a>00078 
<a name="l00079"></a>00079         <span class="comment">// intended to tell a cell that the icon is losing control of an icon (usually for moving/animating it to a new cell)</span>
<a name="l00080"></a>00080         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ae7be5333317a7443c4a7ead782423492">iconCellReleaseIcon</a>(<span class="keyword">const</span> QPoint&amp; cellCoordinate);
<a name="l00081"></a>00081 
<a name="l00082"></a>00082         <span class="keyword">virtual</span> <a class="code" href="classIconCell.htm">IconCell</a> * <a class="code" href="classReorderableIconLayout.htm#a7c7d49c804cb2eae49f591bd28f1a724">iconCellAtLayoutCoordinate</a>(<span class="keyword">const</span> QPointF&amp; coordinate);
<a name="l00083"></a>00083         <span class="keyword">virtual</span> <a class="code" href="classIconCell.htm">IconCell</a> * <a class="code" href="classReorderableIconLayout.htm#a7c7d49c804cb2eae49f591bd28f1a724">iconCellAtLayoutCoordinate</a>(<span class="keyword">const</span> QPointF&amp; layoutCoordinate,QPoint&amp; r_gridCoordinate);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="comment">//returns the rect area of the row specified, in layout CS (it&#39;s the geom of the row, translated to its layout CS position)</span>
<a name="l00086"></a>00086         <span class="keyword">virtual</span> QRectF <a class="code" href="classReorderableIconLayout.htm#aa76eac5c2201e3aa040d02b098641467">rowArea</a>(quint32 rowIndex) <span class="keyword">const</span>;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088         <span class="keyword">virtual</span> QPoint <a class="code" href="classReorderableIconLayout.htm#a7085e1a0e8d330c056853dbf0d8f4eec">lastOccupiedGridPosition</a>() <span class="keyword">const</span>;
<a name="l00089"></a>00089         <span class="keyword">virtual</span> QPoint <a class="code" href="classReorderableIconLayout.htm#a0240a98ddb3e8c70f6292f41bed4af2c">nextAppendGridPosition</a>() <span class="keyword">const</span>;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <span class="keyword">virtual</span> qint32 <a class="code" href="classReorderableIconLayout.htm#afa13334dd4996b81e9592f48db3e8593">rowAtLayoutCoordinate</a>(<span class="keyword">const</span> QPointF&amp; layoutCoordinate,<span class="keywordtype">bool</span> clipMinMax=<span class="keyword">false</span>);
<a name="l00092"></a>00092         <span class="comment">//this variant will ignore the gaps between rows; if the point happens to fall on a gap between the rect or row &quot;i&quot; and row &quot;i+1&quot;, &quot;i&quot; will be returned</span>
<a name="l00093"></a>00093         <span class="keyword">virtual</span> qint32 <a class="code" href="classReorderableIconLayout.htm#af82b06f24e4dd821a6f23dfbb60129ba">rowAtLayoutCoordinateFuzzy</a>(<span class="keyword">const</span> QPointF&amp; layoutCoordinate,<span class="keywordtype">bool</span> clipMinMax=<span class="keyword">false</span>);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095         <span class="comment">//these two can only be used with grid coordinates that already exist. e.g. it can&#39;t determine coordinates</span>
<a name="l00096"></a>00096         <span class="comment">// for a grid that would result if a row needs to be added; This would happen for example, if an icon</span>
<a name="l00097"></a>00097         <span class="comment">// add would end up adding a new row for &quot;overflow&quot; of a row with too many icons</span>
<a name="l00098"></a>00098         <span class="keyword">virtual</span> <a class="code" href="classIconCell.htm">IconCell</a> * <a class="code" href="classReorderableIconLayout.htm#a41327a135a385e271a55f6ce56cf5da3">iconCellAtGridCoordinate</a>(<span class="keyword">const</span> QPoint&amp; gridCoordinate);
<a name="l00099"></a>00099         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a16886583dcf6d6766bebecf31dfca80e">layoutCoordinateForGridCoordinate</a>(<span class="keyword">const</span> QPoint&amp; gridCoordinate,QPointF&amp; r_layoutCoordinate);
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="keyword">virtual</span> <a class="code" href="classIconCell.htm">IconCell</a> * <a class="code" href="classReorderableIconLayout.htm#a7abd11b122fa7df61d2275c8af1a1ed7">findIconByUid</a>(<span class="keyword">const</span> QUuid&amp; iconUid,QPoint&amp; r_gridCoordinate,<span class="keywordtype">bool</span> includePendingIconsInCells = <span class="keyword">false</span>);
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         <span class="comment">// all the icon cells, starting with the leftmost cell of the top row, and ending with the rightmost cell in the bottom row</span>
<a name="l00104"></a>00104         <span class="comment">//WARNING: DO NOT HOLD REF TO ANYTHING FROM THE RETURN OF THIS FN. It could be invalidated at any time (whenever an add/remove or relayout happens)</span>
<a name="l00105"></a>00105         <span class="keyword">virtual</span> QList&lt;IconCell *&gt; <a class="code" href="classReorderableIconLayout.htm#ac0134ddd71dfdb79653a57211460e6db">iconCellsInFlowOrder</a>();
<a name="l00106"></a>00106 
<a name="l00107"></a>00107         <span class="comment">// returns 0 (null) if tracking this icon isn&#39;t possible at the moment</span>
<a name="l00108"></a>00108         <span class="comment">// designed so that iconCellAtLayoutCoordinate() result can be passed right in</span>
<a name="l00109"></a>00109         <span class="comment">//      (it will correctly handle null (not found) icon cell</span>
<a name="l00110"></a>00110         <span class="keyword">virtual</span> <a class="code" href="classIconBase.htm">IconBase</a> * <a class="code" href="classReorderableIconLayout.htm#a163ca53d5b480ecd5d6f7a29f689cc7c">startTrackingIcon</a>(<span class="keyword">const</span> QPoint&amp; gridCoord,<span class="keywordtype">bool</span> includePendingIconsInCells = <span class="keyword">false</span>);
<a name="l00111"></a>00111         <span class="comment">//startTrackingIconFromTransfer(): gridCoord needs to be an empty cell; see addEmptyCell</span>
<a name="l00112"></a>00112         <span class="keyword">virtual</span> <a class="code" href="classIconBase.htm">IconBase</a> * <a class="code" href="classReorderableIconLayout.htm#af56e84a04ff5465907bc27f9f7e102cb">startTrackingIconFromTransfer</a>(<span class="keyword">const</span> QPoint&amp; gridCoord,<a class="code" href="classIconBase.htm">IconBase</a> * iconTracked);
<a name="l00113"></a>00113         <span class="comment">//this variant starts tracking an icon by finding it in the layout by its actual pointer. it is used in the case where the icon</span>
<a name="l00114"></a>00114         <span class="comment">// comes back from the quicklaunch during one, continuous tracking operation (the following pattern: move icon to QL, don&#39;t let go</span>
<a name="l00115"></a>00115         <span class="comment">// of the icon on the QL but immediately move it back to the page). Returns true if the icon was found and can be tracked,</span>
<a name="l00116"></a>00116         <span class="comment">//      and puts its current grid coord in r_gridCoord.</span>
<a name="l00117"></a>00117         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a163ca53d5b480ecd5d6f7a29f689cc7c">startTrackingIcon</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon,QPoint&amp; r_gridCoord);
<a name="l00118"></a>00118 
<a name="l00119"></a>00119         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a05cf1908315c2d63602a83961e6b8900">trackedIconMovedTo</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon,<span class="keyword">const</span> QPoint&amp; gridCoord,QPoint&amp; r_newGridCoord);
<a name="l00120"></a>00120         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#abac1bacf97e5892ce6c1caca7b89da5c">stopTrackingIcon</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon);
<a name="l00121"></a>00121         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a1584e169ce51b7c08b5a8044fb228a82">stopTrackingAll</a>();
<a name="l00122"></a>00122         <span class="comment">//trackedIconLeavingLayout(): used instead of stopTrackingIcon() when the icon has changed hands;</span>
<a name="l00123"></a>00123         <span class="comment">//      e.g. been moved to another page/layout</span>
<a name="l00124"></a>00124         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a7b1ce1a9049aabcfa93c1b52d28ac8cf">trackedIconLeavingLayout</a>(<span class="keyword">const</span> QUuid&amp; trackedIconUid);
<a name="l00125"></a>00125         <span class="comment">//convenience function to look up the uid against m_trackedIconLastPosition and retrieve from icon heap</span>
<a name="l00126"></a>00126         <span class="keyword">virtual</span> <a class="code" href="classIconBase.htm">IconBase</a> * <a class="code" href="classReorderableIconLayout.htm#a4c01c902f949a7524c405a39786d8c10">getTrackedIconByUid</a>(<span class="keyword">const</span> QUuid&amp; trackedIconUid);
<a name="l00127"></a>00127         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a95859576a108e8dd95a98a4779c78bef">lastTrackedPosition</a>(<span class="keyword">const</span> QUuid&amp; iconUid,QPoint&amp; r_lastGridCoord);
<a name="l00128"></a>00128         <span class="keyword">virtual</span> QList&lt;IconOperation&gt; <a class="code" href="classReorderableIconLayout.htm#a589f6cff57497804498964de3a627cfd">opListForMove</a>(<span class="keyword">const</span> QPoint&amp; sourceColumnRow,<span class="keyword">const</span> QPoint&amp; destColumnRow);
<a name="l00129"></a>00129         <span class="comment">//returns the animations to perform the actions described in the opList</span>
<a name="l00130"></a>00130         <span class="keyword">virtual</span> QAnimationGroup * <a class="code" href="classReorderableIconLayout.htm#a2ecbe0cc384847e521f05f20eb5eaf0e">animationsForOpList</a>(QList&lt;IconOperation&gt;&amp; opList);
<a name="l00131"></a>00131         <span class="comment">//uses the op list to set m_reorderPendingCellList which will be needed to commit/finalize the layout;</span>
<a name="l00132"></a>00132         <span class="comment">// this must be done regardless of whether or not animations will be used. It&#39;s being broken out as a separate function</span>
<a name="l00133"></a>00133         <span class="comment">// despite this being a hard requirement, so that this sequence can be better controlled.</span>
<a name="l00134"></a>00134         <span class="comment">// it will fail (return false) if attempting to init from a list with a lower id than has already been used</span>
<a name="l00135"></a>00135         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a24ebe42215849f3a727d1a5be350cd63">initializePendingCellListFromOpList</a>(QList&lt;IconOperation&gt;&amp; opList);
<a name="l00136"></a>00136         <span class="comment">//this operates on an already populated m_reorderPendingCellList. It&#39;s used to finalize a layout</span>
<a name="l00137"></a>00137         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#ab49476c2dcedcc9b5da4a6c71a47de31">commitPending</a>();
<a name="l00138"></a>00138         <span class="comment">//this one will do all the tracked (floating) icons</span>
<a name="l00139"></a>00139         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a08e3ba4c3c19f16bc2f016cb8f8c6249">commitTracked</a>(<span class="keyword">const</span> QUuid&amp; iconUid);
<a name="l00140"></a>00140         <span class="comment">//variant to avoid multiple lookups when the caller already did a lookup</span>
<a name="l00141"></a>00141         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a08e3ba4c3c19f16bc2f016cb8f8c6249">commitTracked</a>(<span class="keyword">const</span> QUuid&amp; iconUid,<span class="keyword">const</span> QPoint&amp; lastGridCoord);
<a name="l00142"></a>00142         <span class="comment">// essentially the same thing as calling animationsForOpList + commitOpList as an uninterrupted sequence</span>
<a name="l00143"></a>00143         <span class="comment">//      returns false if the list can&#39;t be commited (usually because a list of higher id has already been committed)</span>
<a name="l00144"></a>00144         <span class="comment">//      The success / failure is all-or-nothing...nothing will be changed by this call of it if return = false</span>
<a name="l00145"></a>00145         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a7570774b42e3ce894942fb4faa03cc84">executeOpList</a>(QList&lt;IconOperation&gt;&amp; opList);
<a name="l00146"></a>00146 
<a name="l00147"></a>00147         <span class="comment">//will create and return an animation that is made to return the tracked icon in question to the last cell that</span>
<a name="l00148"></a>00148         <span class="comment">// it moved to (see trackedIconMovedTo()). Use this animation IMMEDIATELY, and certainly before any other calls to</span>
<a name="l00149"></a>00149         <span class="comment">// trackedIconMovedTo(), or any of the others in that group (that change the grid position of a tracked icon) occur.</span>
<a name="l00150"></a>00150         <span class="keyword">virtual</span> <a class="code" href="classIconReorderAnimation.htm">IconReorderAnimation</a> * <a class="code" href="classReorderableIconLayout.htm#aa24717c6f99b8862fec6ee039e2574dc">animationForTrackedIconFinal</a>(<span class="keyword">const</span> QUuid&amp; trackedIconUid);
<a name="l00151"></a>00151         <span class="keyword">virtual</span> <a class="code" href="classIconReorderAnimation.htm">IconReorderAnimation</a> * <a class="code" href="classReorderableIconLayout.htm#aa24717c6f99b8862fec6ee039e2574dc">animationForTrackedIconFinal</a>(<span class="keyword">const</span> QUuid&amp; trackedIconUid,<span class="keyword">const</span> QPoint&amp; lastGridCoord);
<a name="l00152"></a>00152         <span class="comment">//Just like stopTracking__() and commit___() operate under normal circumstances and try to let animations finish,</span>
<a name="l00153"></a>00153         <span class="comment">//cancelAllReorder() kills all animations instantly and immediately locks all icons into their final state, as if</span>
<a name="l00154"></a>00154         <span class="comment">// the normal reorders were allowed to finish. This is useful in case of some drastic UI change, like an incoming call,</span>
<a name="l00155"></a>00155         <span class="comment">// a rotation of the screen, the launcher being dismissed, apps being deleted, etc...</span>
<a name="l00156"></a>00156         <span class="comment">// the function has no return value because it cannot fail; if it fails to do anything, then a crash will likely follow</span>
<a name="l00157"></a>00157         <span class="comment">// (or at the very least, a very inconsistent, mostly unusable launcher UI state)</span>
<a name="l00158"></a>00158         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a99c845c5cccedd0e997059d9ae6eadee">cancelAllReorder</a>();
<a name="l00159"></a>00159         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a2ac718fd39b92b96f62cfef0bfc35732">commitPendingImmediately</a>();
<a name="l00160"></a>00160         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a14eaf8568764014c09121a85430bb380">commitTrackedImmediately</a>(<span class="keyword">const</span> QUuid&amp; iconUid);
<a name="l00161"></a>00161         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a14eaf8568764014c09121a85430bb380">commitTrackedImmediately</a>(<span class="keyword">const</span> QUuid&amp; iconUid,<span class="keyword">const</span> QPoint&amp; lastGridCoord);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a7d8fda144e4780fa40396c2534861612">areTherePendingReorderAnimations</a>();
<a name="l00164"></a>00164 
<a name="l00166"></a>00166         <span class="keyword">friend</span> QDataStream &amp; <a class="code" href="classReorderableIconLayout.htm#acbe0f9aea3f15769d40ba7b83dff31c8">operator&lt;&lt; </a>(QDataStream&amp; stream, <span class="keyword">const</span> <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a>&amp; s);
<a name="l00167"></a>00167         <span class="keyword">friend</span> QDataStream &amp; <a class="code" href="classReorderableIconLayout.htm#ae68454f09f3d6ebf813e48d195a424c2">operator&gt;&gt; </a>(QDataStream&amp; stream, <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a>&amp; s);
<a name="l00168"></a>00168         <span class="keyword">friend</span> QDebug <a class="code" href="classReorderableIconLayout.htm#acbe0f9aea3f15769d40ba7b83dff31c8">operator&lt;&lt;</a>(QDebug dbg, <span class="keyword">const</span> <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a> &amp;s);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170         <span class="comment">/*</span>
<a name="l00171"></a>00171 <span class="comment">         *                              addIcon(IconBase * p_icon)</span>
<a name="l00172"></a>00172 <span class="comment">         *</span>
<a name="l00173"></a>00173 <span class="comment">         * Inserts the icon into the row and column that represents the &quot;end&quot; of the layout</span>
<a name="l00174"></a>00174 <span class="comment">         * Since ReorderableIconLayout doesn&#39;t have any specific ordering (it is arbitrarily ordered by the user),</span>
<a name="l00175"></a>00175 <span class="comment">         * the end of the layout is just the next available space</span>
<a name="l00176"></a>00176 <span class="comment">         *</span>
<a name="l00177"></a>00177 <span class="comment">         * Mostly useful for initializing a layout initially. Generally NOT useful at user-visible runtime since</span>
<a name="l00178"></a>00178 <span class="comment">         * it will not calculate any of the animations needed to display the &quot;add&quot;</span>
<a name="l00179"></a>00179 <span class="comment">         *</span>
<a name="l00180"></a>00180 <span class="comment">         * Also, it will not automatically adjust the layout geoms of the icon cells. It is expected a caller</span>
<a name="l00181"></a>00181 <span class="comment">         * will be handling this.</span>
<a name="l00182"></a>00182 <span class="comment">         *</span>
<a name="l00183"></a>00183 <span class="comment">         * returns either 0 if it inserted into an existing row or took no action, or (row index)+1 if it had to insert a new row</span>
<a name="l00184"></a>00184 <span class="comment">         * this value helps the caller determine if it needs to run a relayout of rows, and possibly optimize the relayout</span>
<a name="l00185"></a>00185 <span class="comment">         * over only some rows</span>
<a name="l00186"></a>00186 <span class="comment">         *</span>
<a name="l00187"></a>00187 <span class="comment">         * It also sets the m_layoutSync variable if any layout state was modified (this disambiguates return=0)</span>
<a name="l00188"></a>00188 <span class="comment">         */</span>
<a name="l00189"></a>00189         <span class="keyword">virtual</span> quint32 <a class="code" href="classReorderableIconLayout.htm#a50e62011cfae73cf76093d9df6c912e0">addIcon</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191         <span class="comment">//this is its counterpart, used for relayoutExisting()</span>
<a name="l00192"></a>00192         <span class="keyword">virtual</span> quint32 <a class="code" href="classReorderableIconLayout.htm#a50e62011cfae73cf76093d9df6c912e0">addIcon</a>(<a class="code" href="classIconCell.htm">IconCell</a> * p_cell);
<a name="l00193"></a>00193 
<a name="l00194"></a>00194         <span class="comment">//returns the grid coordinate of the new cell, or (-1,-1) if no new cell can be added</span>
<a name="l00195"></a>00195         <span class="keyword">virtual</span> QPoint <a class="code" href="classReorderableIconLayout.htm#ab85a99e1e36647572b9e71c895a90caa">addEmptyCell</a>();
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="comment">//versions of the above that insert into specific locations. If gridCoordinate is invalid, then it will default to (0,0)</span>
<a name="l00198"></a>00198         <span class="comment">// return convention is the same as for addIcon</span>
<a name="l00199"></a>00199         <span class="comment">// however, if these return &gt; 0 , relayoutExisting() MUST BE RUN SOMETIME SOON AFTER!</span>
<a name="l00200"></a>00200         <span class="comment">// (it&#39;s an optimization to avoid having to &quot;ripple down&quot; the right most icon at each row and adding the</span>
<a name="l00201"></a>00201         <span class="comment">//      final &quot;leftover icon&quot; into the last row or creating a new row at the bottom. relayoutExisting already</span>
<a name="l00202"></a>00202         <span class="comment">//  does all this so it&#39;ll be a waste to do it here. Philosophically, it would be more correct to have this</span>
<a name="l00203"></a>00203         <span class="comment">//      function at least maintain the rows w.r.t. the ordering and max column count, but like i said, this is an</span>
<a name="l00204"></a>00204         <span class="comment">//      optimization)</span>
<a name="l00205"></a>00205         <span class="keyword">virtual</span> quint32 <a class="code" href="classReorderableIconLayout.htm#abc4dd2d5173925806f9e63211d727486">addIconAt</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon,<span class="keyword">const</span> QPoint&amp; gridCoordinate);
<a name="l00206"></a>00206         <span class="keyword">virtual</span> quint32 <a class="code" href="classReorderableIconLayout.htm#abc4dd2d5173925806f9e63211d727486">addIconAt</a>(<a class="code" href="classIconCell.htm">IconCell</a> * p_cell,<span class="keyword">const</span> QPoint&amp; gridCoordinate);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208         <span class="comment">//(this one also has the same return convention as addEmptyCell, and will default to appending to the end of the layout (same as addEmptyCell)</span>
<a name="l00209"></a>00209         <span class="comment">//      if gridCoordinate is invalid)</span>
<a name="l00210"></a>00210         <span class="keyword">virtual</span> QPoint <a class="code" href="classReorderableIconLayout.htm#ade8311ea4d6b66c909126ba3a9c8248e">addEmptyCellAt</a>(<span class="keyword">const</span> QPoint&amp; gridCoordinate);
<a name="l00211"></a>00211 
<a name="l00212"></a>00212         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a1a49c3cb3b815ae9cc9e1f07ee361640">removeIconCell</a>(<span class="keyword">const</span> QPoint&amp; gridCoordinate);
<a name="l00213"></a>00213 
<a name="l00215"></a>00215         <span class="comment">/*</span>
<a name="l00216"></a>00216 <span class="comment">                These are versions of common functions like &quot;insert&quot; which are used</span>
<a name="l00217"></a>00217 <span class="comment">                at runtime, but these variants should ONLY be used during initialization, as they</span>
<a name="l00218"></a>00218 <span class="comment">                will likely and frequently omit setting/checking/returning/etc state that is required</span>
<a name="l00219"></a>00219 <span class="comment">                to make things &quot;look right&quot; in the UI.</span>
<a name="l00220"></a>00220 <span class="comment">                They are all prefixed with &quot;init&quot; should it should be easy to identify them and keep</span>
<a name="l00221"></a>00221 <span class="comment">                track of this rule</span>
<a name="l00222"></a>00222 <span class="comment">        */</span>
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ac370560563bf9b55ec980e6b7bafd4a1">initLayoutFromSequentialIconList</a>(<a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a>&amp; layout,
<a name="l00226"></a>00226                                                                                                                 <span class="keyword">const</span> <a class="code" href="icon_8h.htm#a3f167fd98d583799fab4f721ff2d2b6f">IconList</a> iconList);
<a name="l00227"></a>00227 Q_SIGNALS:
<a name="l00228"></a>00228 
<a name="l00229"></a>00229 <span class="comment">//              These two signals are the overall indicators of when a reordering begins and ends.</span>
<a name="l00230"></a>00230 <span class="comment">//              reordering here means more than just &quot;reorder pending&quot; (vs moving/float icon tracking),</span>
<a name="l00231"></a>00231 <span class="comment">//              it means *overall* reorder , i.e. the state is not consistent from the POV of the outside world</span>
<a name="l00232"></a>00232         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ae66c09cc1a3cb2a1531704e5a956966b">signalReorderStarted</a>();
<a name="l00233"></a>00233         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a1b7f9acb93faa3e6d67d61d72d30f2e5">signalReorderEnded</a>();
<a name="l00234"></a>00234 
<a name="l00235"></a>00235 <span class="comment">//              these are for the FSM !ONLY!</span>
<a name="l00236"></a>00236         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ab25ddef6f16d482bb920b565ec56e825">signalFSMTrackStarted_Trigger</a>();
<a name="l00237"></a>00237         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a33b28227cfbf8f9aebc121ab3ebc4583">signalFSMTrackEnded_Trigger</a>();
<a name="l00238"></a>00238         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#aaff147af020aeb0b2e8e6ca3a042c223">signalFSMLastTrackEndedTrigger</a>();                  <span class="comment">//TODO: HACK: see slotTrackForIconEnded() below</span>
<a name="l00239"></a>00239         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a1b89ae0986d84f2874d828b73103a955">signalFSMReorderStarted_Trigger</a>();
<a name="l00240"></a>00240         <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a74a24461ae5ff25029fcf011a0625509">signalFSMReorderEnded_Trigger</a>();
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="keyword">protected</span> Q_SLOTS:
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a74b2040bec7b6234b5e8e5fa07b1d86b" title="protected Q_SLOTS:">slotReorderAnimationsFinished</a>();
<a name="l00245"></a>00245         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ac21ae1d7ed3f5e522c822d739e0446aa">slotTrackedIconReplacementAnimationFinished</a>();
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="comment">//TODO: HACK: TEMP: the FSM should actually count the number of in-flight trackings and switch states accordingly</span>
<a name="l00248"></a>00248         <span class="comment">//              Qt&#39;s guarded (conditional) transitions are kind of weird so i&#39;m holding off on implementing this for now</span>
<a name="l00249"></a>00249         <span class="comment">//              this function will check the number of in-flights and emit the signalFSMLastTrackEndedTrigger as appropriate</span>
<a name="l00250"></a>00250         <span class="comment">//                      I&#39;m weaving it this way with a signal-&gt;slot inside this (same) class - usually a bad idea - to minimize the</span>
<a name="l00251"></a>00251         <span class="comment">//                      changes needed when this gets done correctly</span>
<a name="l00252"></a>00252         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#af4211cda590931dcfeb3a8db521f4f04">slotTrackForIconEnded</a>();
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a8d5a337348bd7fb746df0afe8b0dda2f">dbg_reorderFSMStateEntered</a>();
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="keyword">protected</span>:
<a name="l00257"></a>00257 
<a name="l00258"></a>00258         <span class="comment">//deletes all the rows (but not the cells contained) and re-inits my state variables to reflect the change</span>
<a name="l00260"></a>00260 <span class="comment"></span>        <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a1fe0d348ba0cd2fafc169291a11aeacd" title="used by relayoutExisting()">destroyAllRows</a>();
<a name="l00261"></a>00261 
<a name="l00262"></a>00262         <span class="comment">//TODO: return an error code as appropriate; calculations can fail if either the page width is too small or icon size if too great</span>
<a name="l00263"></a>00263         <span class="keyword">virtual</span> qint32 <a class="code" href="classReorderableIconLayout.htm#a85e7e107c0166f2d0152361da0d1e81e">calculateAndSetHorizontalSpaceParameters</a>();
<a name="l00264"></a>00264 
<a name="l00265"></a>00265         <span class="comment">/*</span>
<a name="l00266"></a>00266 <span class="comment">         * when resizing the layout when it has already been done, there is a potential that rows may need to be added</span>
<a name="l00267"></a>00267 <span class="comment">         * (when the width shrinks) or rows may need to be removed (when the width expands)</span>
<a name="l00268"></a>00268 <span class="comment">         *</span>
<a name="l00269"></a>00269 <span class="comment">         * This function will handle these adds and removes. It is a counterpart to relayout(); that function is kind of a misnomer</span>
<a name="l00270"></a>00270 <span class="comment">         *      since it doesn&#39;t really RE-layout...it is more for initial layouts</span>
<a name="l00271"></a>00271 <span class="comment">         *</span>
<a name="l00272"></a>00272 <span class="comment">         *      TODO: initially, this will delete all the rows but keep the cells, and then recreate the rows, adding/removing as necessary.</span>
<a name="l00273"></a>00273 <span class="comment">         *              This can be made more efficient, but I don&#39;t have time right now, due to Demo-Demo-Demo!</span>
<a name="l00274"></a>00274 <span class="comment">         */</span>
<a name="l00275"></a>00275         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a01acc93ef20b3f6b866e316bd9b7a2f7">relayoutExisting</a>();
<a name="l00276"></a>00276 
<a name="l00277"></a>00277         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a8ba9c9737ab91c07ea0e2128467bf680">setupReorderFSM</a>();
<a name="l00278"></a>00278         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ad6aedde1e681b3f9dee4eaecdb1f7f2a">startReorderFSM</a>();
<a name="l00279"></a>00279         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ad3e9e28b04ce4d96fc3cdf7c1a4ac7bc">stopReorderFSM</a>();
<a name="l00280"></a>00280 
<a name="l00281"></a>00281         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classReorderableIconLayout.htm#a732ab4d748240611e1bfe5a5966c067f">isReorderStateConsistent</a>() <span class="keyword">const</span>;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ac78d8f8e0a92747bb19eb20676177570">switchIconsToReorderGraphics</a>();
<a name="l00284"></a>00284         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#aba3dfd5564f78558d6b12199c182b48d">switchIconsToNormalGraphics</a>();
<a name="l00285"></a>00285         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ad783e82d03b4b66d51da1fceee26c3d4">switchIconToReorderGraphics</a>(<a class="code" href="classIconCell.htm">IconCell</a> * p_iconCell);
<a name="l00286"></a>00286         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a55bb4c2cce43464a26baea2c39535001">switchIconToNormalGraphics</a>(<a class="code" href="classIconCell.htm">IconCell</a> * p_iconCell);
<a name="l00287"></a>00287         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#ad783e82d03b4b66d51da1fceee26c3d4">switchIconToReorderGraphics</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon);
<a name="l00288"></a>00288         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classReorderableIconLayout.htm#a55bb4c2cce43464a26baea2c39535001">switchIconToNormalGraphics</a>(<a class="code" href="classIconBase.htm">IconBase</a> * p_icon);
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="keyword">protected</span>:
<a name="l00291"></a>00291 
<a name="l00292"></a><a class="code" href="classReorderableIconLayout.htm#afb284dd5e162e11579bfbc758562d10a">00292</a>         <span class="keyword">typedef</span> QList&lt;IconRow *&gt; <a class="code" href="classReorderableIconLayout.htm#afb284dd5e162e11579bfbc758562d10a">IconRowList</a>;
<a name="l00293"></a><a class="code" href="classReorderableIconLayout.htm#a14ebf8d08f826b8b1b8a783324094fe0">00293</a>         <span class="keyword">typedef</span> IconRowList::const_iterator <a class="code" href="classReorderableIconLayout.htm#a14ebf8d08f826b8b1b8a783324094fe0">IconRowConstIter</a>;
<a name="l00294"></a><a class="code" href="classReorderableIconLayout.htm#a6de9d024df79e349fe9bd567961aebe0">00294</a>         <span class="keyword">typedef</span> IconRowList::iterator <a class="code" href="classReorderableIconLayout.htm#a6de9d024df79e349fe9bd567961aebe0">IconRowIter</a>;
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="classReorderableIconLayout.htm#a619acc358d720649648e6ec674bed07c">00296</a>         <a class="code" href="classReorderableIconLayout.htm#afb284dd5e162e11579bfbc758562d10a">IconRowList</a> <a class="code" href="classReorderableIconLayout.htm#a619acc358d720649648e6ec674bed07c">m_iconRows</a>;
<a name="l00297"></a>00297 
<a name="l00298"></a><a class="code" href="classReorderableIconLayout.htm#a2b4ac21098105d24945606bd87d0c658">00298</a>         <span class="keywordtype">bool</span>    <a class="code" href="classReorderableIconLayout.htm#a2b4ac21098105d24945606bd87d0c658">m_layoutSync</a>;
<a name="l00299"></a><a class="code" href="classReorderableIconLayout.htm#af7020f86921fe38ca74a87b912c52de1">00299</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#af7020f86921fe38ca74a87b912c52de1">m_relayoutCount</a>;
<a name="l00300"></a><a class="code" href="classReorderableIconLayout.htm#ae54bb52dda2e73cfb0ec94c7a5e73a49">00300</a>         <span class="keywordtype">bool</span>    <a class="code" href="classReorderableIconLayout.htm#ae54bb52dda2e73cfb0ec94c7a5e73a49">m_disabledAutoPaint</a>;
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="classReorderableIconLayout.htm#a5906a171a80cd2ba1dd87f6de3e2b6ea">00302</a>         <span class="keywordtype">bool</span>    <a class="code" href="classReorderableIconLayout.htm#a5906a171a80cd2ba1dd87f6de3e2b6ea">m_usingReorderModeGraphics</a>;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304         <span class="comment">//all units here in pixels</span>
<a name="l00305"></a><a class="code" href="classReorderableIconLayout.htm#abdb5294604971c5858e2c9a5306f5df7">00305</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#abdb5294604971c5858e2c9a5306f5df7">m_maxWidthForRows</a>;
<a name="l00306"></a><a class="code" href="classReorderableIconLayout.htm#ada7692550639f8e5d8ff36c77c662bbf">00306</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#ada7692550639f8e5d8ff36c77c662bbf">m_maxIconsPerRow</a>;
<a name="l00307"></a><a class="code" href="classReorderableIconLayout.htm#a876677dd606a2cf797f9d26035054660">00307</a>         qint32 <a class="code" href="classReorderableIconLayout.htm#a876677dd606a2cf797f9d26035054660">m_horizIconSpacingAdjust</a>;
<a name="l00308"></a><a class="code" href="classReorderableIconLayout.htm#a2e1d09ccf5386b0d9e02f9e8ee801201">00308</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#a2e1d09ccf5386b0d9e02f9e8ee801201">m_interRowSpace</a>;                <span class="comment">//between two rows</span>
<a name="l00309"></a>00309 
<a name="l00310"></a>00310         <span class="comment">//      Layout adjustments - all of this comes from IconLayoutSettings</span>
<a name="l00311"></a><a class="code" href="classReorderableIconLayout.htm#a194e7466cda5d15c37f296964b45e852">00311</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#a194e7466cda5d15c37f296964b45e852">m_leftMarginForRows</a>;
<a name="l00312"></a><a class="code" href="classReorderableIconLayout.htm#ab7262ccceb59f1e274d2fab7f84a1d81">00312</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#ab7262ccceb59f1e274d2fab7f84a1d81">m_topMarginForRows</a>;
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="classReorderableIconLayout.htm#a49c47e013d0561464c7537915abd4376">00315</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#a49c47e013d0561464c7537915abd4376">m_anchorRow</a>;                    <span class="comment">//the current anchor row (from which (re)layouts are performed)</span>
<a name="l00316"></a>00316 
<a name="l00317"></a><a class="code" href="classReorderableIconLayout.htm#a5d4e83449d5401857a581f65241e3d92">00317</a>         QSize   <a class="code" href="classReorderableIconLayout.htm#a5d4e83449d5401857a581f65241e3d92">m_iconCellSize</a>;                         <span class="comment">//calculated from page size and m_maxIconsPerRow...see initLayout...()</span>
<a name="l00318"></a><a class="code" href="classReorderableIconLayout.htm#adae075e2b5242e3ffc01ac11510712b3">00318</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#adae075e2b5242e3ffc01ac11510712b3">m_horizIconSpacing</a>;                     <span class="comment">//(ditto)...takes into account m_horizIconSpacingAdjust</span>
<a name="l00319"></a>00319 
<a name="l00320"></a><a class="code" href="classReorderableIconLayout.htm#aa54a37b03038022fd9a83a250066d1fd">00320</a>         QSize   <a class="code" href="classReorderableIconLayout.htm#aa54a37b03038022fd9a83a250066d1fd">m_layoutSizeInPixels</a>;           <span class="comment">//for rendering offscreen</span>
<a name="l00321"></a>00321 
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="classReorderableIconLayout.htm#a2a588149ca90439b99989fb9e5358d52">00323</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#a2a588149ca90439b99989fb9e5358d52">m_reorderEventSampleRate</a>;       <span class="comment">//determines when to check a moving icon against the layout to see what</span>
<a name="l00324"></a>00324                                                                                 <span class="comment">// if anything, needs to be reordered. For now, it will count instances</span>
<a name="l00325"></a>00325                                                                                 <span class="comment">// of &quot;move&quot; events (e.g. mouseMove) but I&#39;ll add other ways to threshold</span>
<a name="l00326"></a>00326                                                                                 <span class="comment">// This is useful because checking boundaries on icons and rows in very large</span>
<a name="l00327"></a>00327                                                                                 <span class="comment">// layouts could be expensive, as is generating operation lists and animations</span>
<a name="l00328"></a><a class="code" href="classReorderableIconLayout.htm#a01734401f8b4b05b36ec30441f4f74a0">00328</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#a01734401f8b4b05b36ec30441f4f74a0">m_maxVelocityForSampling</a>;
<a name="l00329"></a><a class="code" href="classReorderableIconLayout.htm#adac3a33f6dda553e70e78c5aaa464a77">00329</a>         quint64 <a class="code" href="classReorderableIconLayout.htm#adac3a33f6dda553e70e78c5aaa464a77">m_timeNormalizationUnit</a>;
<a name="l00330"></a><a class="code" href="classReorderableIconLayout.htm#ad23f8e2b244c9f77aecbbcfb5b051f90">00330</a>         quint32 <a class="code" href="classReorderableIconLayout.htm#ad23f8e2b244c9f77aecbbcfb5b051f90">m_magFactor</a>;
<a name="l00331"></a><a class="code" href="classReorderableIconLayout.htm#ad8fb5f1c0308fdcf3a910a2b9a840f52">00331</a>         quint64 <a class="code" href="classReorderableIconLayout.htm#ad8fb5f1c0308fdcf3a910a2b9a840f52">m_lastTimeUsed</a>;
<a name="l00332"></a>00332 
<a name="l00333"></a><a class="code" href="classReorderableIconLayout.htm#a3d6919611e436a4976c369f16204588b">00333</a>         quint64                                         <a class="code" href="classReorderableIconLayout.htm#a3d6919611e436a4976c369f16204588b">m_listIdInUse</a>;
<a name="l00334"></a><a class="code" href="classReorderableIconLayout.htm#a64bccf9247e3641365e5349dab755443">00334</a>         QList&lt;QPointer&lt;IconCell&gt; &gt; <a class="code" href="classReorderableIconLayout.htm#a64bccf9247e3641365e5349dab755443">m_reorderPendingCellList</a>;
<a name="l00335"></a><a class="code" href="classReorderableIconLayout.htm#a7c53c7d6c16844942f4bbf04cd7bf096">00335</a>         QPointer&lt;QAnimationGroup&gt; <a class="code" href="classReorderableIconLayout.htm#a7c53c7d6c16844942f4bbf04cd7bf096">m_qp_reorderAnimationGroup</a>;
<a name="l00336"></a><a class="code" href="classReorderableIconLayout.htm#a37f423de958a54c9d90983ff13a6eb66">00336</a>         QMap&lt;QUuid,QPointer&lt;IconReorderAnimation&gt; &gt; <a class="code" href="classReorderableIconLayout.htm#a37f423de958a54c9d90983ff13a6eb66">m_trackedIconAnimations</a>;
<a name="l00337"></a><a class="code" href="classReorderableIconLayout.htm#a318a24a7fae50e1e5b10d78d4a89fd69">00337</a>         QMap&lt;QUuid,QPoint&gt;      <a class="code" href="classReorderableIconLayout.htm#a318a24a7fae50e1e5b10d78d4a89fd69">m_trackedIconLastPosition</a>;
<a name="l00338"></a>00338 
<a name="l00339"></a><a class="code" href="classReorderableIconLayout.htm#af16adec81c4a127b4faddb4a8440716f">00339</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="classReorderableIconLayout.htm#af16adec81c4a127b4faddb4a8440716f">ReorderFSMPropertyName_isConsistent</a>;
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classReorderableIconLayout.htm#af38057b68e55ac1b0f638abbcd5f7f87">00341</a>         <a class="code" href="classQStateMachine.htm">QStateMachine</a> * <a class="code" href="classReorderableIconLayout.htm#af38057b68e55ac1b0f638abbcd5f7f87">m_p_reorderFSM</a>;
<a name="l00342"></a><a class="code" href="classReorderableIconLayout.htm#aeb6d89061f53176d3c40bb25c50dddf8">00342</a>         <a class="code" href="classQState.htm">QState</a> * <a class="code" href="classReorderableIconLayout.htm#aeb6d89061f53176d3c40bb25c50dddf8">m_p_fsmStateConsistent</a>;
<a name="l00343"></a><a class="code" href="classReorderableIconLayout.htm#ad408b563b485b77ca3e1e05341fe0491">00343</a>         <a class="code" href="classQState.htm">QState</a> * <a class="code" href="classReorderableIconLayout.htm#ad408b563b485b77ca3e1e05341fe0491">m_p_fsmStateReorderPending</a>;
<a name="l00344"></a><a class="code" href="classReorderableIconLayout.htm#afcec60c328455b1339ee504c67028ba0">00344</a>         <a class="code" href="classQState.htm">QState</a> * <a class="code" href="classReorderableIconLayout.htm#afcec60c328455b1339ee504c67028ba0">m_p_fsmStateTrackedFloating</a>;
<a name="l00345"></a><a class="code" href="classReorderableIconLayout.htm#acdd61a8423e903d084f0bf081a626ba8">00345</a>         <a class="code" href="classQState.htm">QState</a> * <a class="code" href="classReorderableIconLayout.htm#acdd61a8423e903d084f0bf081a626ba8">m_p_fsmStateReorderPendingAndTrackedFloating</a>;
<a name="l00346"></a>00346 
<a name="l00347"></a>00347 };
<a name="l00348"></a>00348 
<a name="l00349"></a>00349 QDataStream &amp; <a class="code" href="CardWindow_8cpp.htm#a96af481eae4e878cd6d37832d12640ae">operator&lt;&lt; </a>(QDataStream&amp; stream, <span class="keyword">const</span> <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a>&amp; s);
<a name="l00350"></a>00350 QDataStream &amp; <a class="code" href="alphabeticonlayout_8cpp.htm#a27c4f32d17b875803756c018f64d376a">operator&gt;&gt; </a>(QDataStream&amp; stream, <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a>&amp; s);
<a name="l00351"></a>00351 QDebug <a class="code" href="CardWindow_8cpp.htm#a96af481eae4e878cd6d37832d12640ae">operator&lt;&lt;</a>(QDebug dbg, <span class="keyword">const</span> <a class="code" href="classReorderableIconLayout.htm">ReorderableIconLayout</a> &amp;s);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 <span class="preprocessor">#endif </span><span class="comment">/* REORDERABLEICONLAYOUT_H_ */</span>
</pre></div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="reorderableiconlayout_8h.htm">reorderableiconlayout.h</a>      </li>

    <li class="footer">Generated on Fri Oct 5 2012 19:52:26 for LunaSysMgr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
